; compile all necessary modules 
@setup_nadc.idl

; open file
data_dir = '/SCIA/LV0_04/P/'
flname = 'SCI_NL__0PPLRA20070727_193804_000057182060_00157_28267_6316.N1'

SCIA_HL_OPEN, data_dir + flname, dsd, status=status
IF status NE 0 THEN NADC_ERR_TRACE

; collect info about SCIAMACHY source packets
flname = STRMID(flname, STRPOS( flname, '/', /REVERSE_SEARCH )+1)
SCIA_LV0_RD_MDS_INFO, flname, dsd, info, status=status
IF status NE 0 THEN NADC_ERR_TRACE

; read Auxiliary source packets
PRINT, 'SCIA_LV0_RD_MDS_AUX'
SCIA_LV0_RD_AUX, info, mds_aux, status=status, state_id=6
IF status NE 0 THEN NADC_ERR_TRACE

; process PMD source packets
PRINT, 'SCIA_LV0_RD_MDS_PMD'
SCIA_LV0_RD_PMD, info, mds_pmd, status=status, state_id=6
IF status NE 0 THEN NADC_ERR_TRACE

; read Detector source packets
PRINT, 'SCIA_LV0_RD_MDS_DET'
SCIA_LV0_RD_DET, info, mds_det, status=status, state_id=6
IF status NE 0 THEN NADC_ERR_TRACE

; close file
stat = SCIA_FCLOSE()
